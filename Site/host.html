<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>codetogether | room-name</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="AdminLTE/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- jvectormap -->
    <link rel="stylesheet" href="AdminLTE/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="AdminLTE/dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="AdminLTE/dist/css/skins/_all-skins.min.css">

    <!-- Code editor -->
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="codemirror/theme/3024-day.css">
    <link rel="stylesheet" href="codemirror/theme/3024-night.css">
    <link rel="stylesheet" href="codemirror/theme/abcdef.css">
    <link rel="stylesheet" href="codemirror/theme/ambiance.css">
    <link rel="stylesheet" href="codemirror/theme/base16-dark.css">
    <link rel="stylesheet" href="codemirror/theme/bespin.css">
    <link rel="stylesheet" href="codemirror/theme/base16-light.css">
    <link rel="stylesheet" href="codemirror/theme/blackboard.css">
    <link rel="stylesheet" href="codemirror/theme/cobalt.css">
    <link rel="stylesheet" href="codemirror/theme/colorforth.css">
    <link rel="stylesheet" href="codemirror/theme/dracula.css">
    <link rel="stylesheet" href="codemirror/theme/eclipse.css">
    <link rel="stylesheet" href="codemirror/theme/elegant.css">
    <link rel="stylesheet" href="codemirror/theme/erlang-dark.css">
    <link rel="stylesheet" href="codemirror/theme/hopscotch.css">
    <link rel="stylesheet" href="codemirror/theme/icecoder.css">
    <link rel="stylesheet" href="codemirror/theme/isotope.css">
    <link rel="stylesheet" href="codemirror/theme/lesser-dark.css">
    <link rel="stylesheet" href="codemirror/theme/liquibyte.css">
    <link rel="stylesheet" href="codemirror/theme/material.css">
    <link rel="stylesheet" href="codemirror/theme/mbo.css">
    <link rel="stylesheet" href="codemirror/theme/default.css">
    <link rel="stylesheet" href="codemirror/theme/midnight.css">
    <link rel="stylesheet" href="codemirror/theme/monokai.css">
    <link rel="stylesheet" href="codemirror/theme/neat.css">
    <link rel="stylesheet" href="codemirror/theme/neo.css">
    <link rel="stylesheet" href="codemirror/theme/night.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-dark.css">
    <link rel="stylesheet" href="codemirror/theme/paraiso-light.css">
    <link rel="stylesheet" href="codemirror/theme/pastel-on-dark.css">
    <link rel="stylesheet" href="codemirror/theme/railscasts.css">
    <link rel="stylesheet" href="codemirror/theme/rubyblue.css">
    <link rel="stylesheet" href="codemirror/theme/seti.css">
    <link rel="stylesheet" href="codemirror/theme/solarized.css">
    <link rel="stylesheet" href="codemirror/theme/the-matrix.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-bright.css">
    <link rel="stylesheet" href="codemirror/theme/tomorrow-night-eighties.css">
    <link rel="stylesheet" href="codemirror/theme/ttcn.css">
    <link rel="stylesheet" href="codemirror/theme/twilight.css">
    <link rel="stylesheet" href="codemirror/theme/vibrant-ink.css">
    <link rel="stylesheet" href="codemirror/theme/xq-dark.css">
    <link rel="stylesheet" href="codemirror/theme/xq-light.css">
    <link rel="stylesheet" href="codemirror/theme/yeti.css">
    <link rel="stylesheet" href="codemirror/theme/zenburn.css">
    <script src="codemirror/lib/codemirror.js"></script>
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <script src="codemirror/addon/selection/active-line.js"></script>
    <script src="codemirror/addon/edit/matchbrackets.js"></script>

    <link rel="stylesheet" href="codemirror/addon/hint/show-hint.css">
    <link rel="stylesheet" href="codemirror/addon/fold/foldgutter.css" />
    <script src="codemirror/addon/hint/show-hint.js"></script>
    <script src="codemirror/addon/hint/javascript-hint.js"></script>
    <script src="codemirror/addon/fold/foldcode.js"></script>
    <script src="codemirror/addon/fold/foldgutter.js"></script>
    <script src="codemirror/addon/fold/brace-fold.js"></script>
    <script src="codemirror/addon/fold/xml-fold.js"></script>
    <script src="codemirror/addon/fold/comment-fold.js"></script>
    <script src="codemirror/mode/xml/xml.js"></script>

    <style type="text/css">
          .CodeMirror {border: 1px solid black; font-size:13px}
        </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <style type="text/css">.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}</style>

  <script src="https://js.pusher.com/3.0/pusher.min.js"></script>

  </head>
  <body class="skin-blue sidebar-mini sidebar-collapse">
    <div class="wrapper">

      <header class="main-header">

        <!-- Logo -->
        <a href="index.html" class="logo">
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <span class="logo-mini"><b>C</b>T</span>
          <!-- logo for regular state and mobile devices -->
          <span class="logo-lg"><b>code</b>together</span>
        </a>

        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
            <script>
              var w = window.innerWidth;
              console.log(w);

              document.getElementById("textareaForm").style.height = w + 50 + "px";
            </script>
          </a>
          <!-- Navbar Right Menu -->
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <!-- Messages: style can be found in dropdown.less-->
              
              <!-- Notifications: style can be found in dropdown.less -->
              
              <!-- Tasks: style can be found in dropdown.less -->
              
              <!-- User Account: style can be found in dropdown.less -->
              
              <!-- Control Sidebar Toggle Button -->
              
            </ul>
          </div>

        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar" style="height: auto;">
          <!-- Sidebar user panel -->
          <div class="user-panel">
            <div class="pull-left image">
              <img src="css/images/anuticasichocholino.jpg" class="img-circle" alt="User Image">
            </div>
            <div class="pull-left info">
              <p>Razvan Ana</p>
              <!-- <a href="#"><i class="fa fa-circle text-success"></i> Online</a> -->
            </div>
          </div>
          <!-- sidebar menu: : style can be found in sidebar.less -->
          <ul class="sidebar-menu">
            <li>
              <a data-toggle="modal" data-target="#myModal">
                <i class="fa fa-edit"></i> <span data-toggle="modal" data-target="#myModal">Add challenge</span>
              </a>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-circle-o text-red"></i>
                <span>Pending</span>
                <i class="fa fa-angle-left pull-right"></i>
              </a>
              <ul id="pending-challenges" class="treeview-menu">
                <!-- <li><a href="#"><i class="fa fa-circle-o"></i> Action 1</a></li> -->
              </ul>
            </li>

            <li class="treeview">
                <a href="#">
                  <i class="fa fa-circle-o text-green"></i>
                  <span>Done</span>
                  <i class="fa fa-angle-left pull-right"></i>
                </a>
                <ul id="done-challenges" class="treeview-menu">
                  <li><a href="#"><i class="fa fa-circle-o"></i> Print in Python</a></li>
                </ul>
              </li>

          </ul>

        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <!-- /.content-wrapper -->

      <form id="textareaForm"><textarea id="code" name="code"></textarea></form>

      <nav class="navbar navbar-default navbar-fixed-bottom" style="min-height: 25px;">
                      <p><select onchange="selectTheme()" id=select>
                        <option selected>default</option>
                        <option>3024-day</option>
                        <option>3024-night</option>
                        <option>abcdef</option>
                        <option>ambiance</option>
                        <option>base16-dark</option>
                        <option>base16-light</option>
                        <option>bespin</option>
                        <option>blackboard</option>
                        <option>cobalt</option>
                        <option>colorforth</option>
                        <option>dracula</option>
                        <option>eclipse</option>
                        <option>elegant</option>
                        <option>erlang-dark</option>
                        <option>hopscotch</option>
                        <option>icecoder</option>
                        <option>isotope</option>
                        <option>lesser-dark</option>
                        <option>liquibyte</option>
                        <option>material</option>
                        <option>mbo</option>
                        <option>default</option>
                        <option>midnight</option>
                        <option>monokai</option>
                        <option>neat</option>
                        <option>neo</option>
                        <option>night</option>
                        <option>paraiso-dark</option>
                        <option>paraiso-light</option>
                        <option>pastel-on-dark</option>
                        <option>railscasts</option>
                        <option>rubyblue</option>
                        <option>seti</option>
                        <option>solarized dark</option>
                        <option>solarized light</option>
                        <option>the-matrix</option>
                        <option>tomorrow-night-bright</option>
                        <option>tomorrow-night-eighties</option>
                        <option>ttcn</option>
                        <option>twilight</option>
                        <option>vibrant-ink</option>
                        <option>xq-dark</option>
                        <option>xq-light</option>
                        <option>yeti</option>
                        <option>zenburn</option>
                    </select>
                    </p>


        <!-- <div class="container">
        </div> -->
      </nav>

        <!-- Modal -->
        <div id="myModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Add a new challenge!</h4>
              </div>
              <div class="modal-body">
                  <div class="form-group">
                    <label for="challengetitle">Title:</label>
                    <input type="text" class="form-control" id="challengetitle">
                  </div>
                  <div class="form-group">
                    <label for="challengedescription">Description:</label>
                    <textarea rows="4" class="form-control" id="challengedescription"></textarea>
                  </div>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-default" data-dismiss="modal" onclick="addPending();">Add</button>
              </div>
            </div>

          </div>
        </div>

         <!-- Modal -->
        <div id="solutionModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Challenge solved!</h4>
              </div>
              <div class="modal-body">
                  <div class="form-group">
                    <label for="challengetitle">Title:</label>
                    <input type="text" class="form-control" id="solvedTitle" readonly>
                  </div>
                  <div class="form-group">
                    <label for="challengedescription">Description:</label>
                    <textarea rows="4" class="form-control" id="solvedDescription" readonly></textarea>
                  </div>
              </div>
            </div>

          </div>
        </div>

        <!-- Modal -->
        <div id="pendingModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Solve a challenge!</h4>
              </div>
              <div class="modal-body">
                  <div class="form-group">
                    <label for="challengetitle">Title:</label>
                    <input type="text" class="form-control" id="pendingTitle">
                  </div>
                  <div class="form-group">
                    <label for="challengedescription">Description:</label>
                    <textarea rows="4" class="form-control" id="pendingDescription"></textarea>
                  </div>
              </div>
            </div>

          </div>
        </div>

        <script>
          var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            styleActiveLine: true,
            matchBrackets: true,
            lineWrapping: true,
            extraKeys: {"Ctrl-Space": "autocomplete", "Enter": onNewLine},

            foldGutter: {
                rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment)
            },
            gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
          });

        var getUrlParameter = function getUrlParameter(sParam) {
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        };

         function onNewLine(e){
            editor.replaceSelection("\n" ,"end");
            var code = editor.getValue();
            var channel = getUrlParameter('channel');
              $.post('https://codetogethertech.herokuapp.com/send_code/' + channel + '&code=' + encodeURIComponent(code), code, function(data) {
                console.log("works on every enter");
            });
          }

          var input = document.getElementById("select");
          function selectTheme() {
            var theme = input.options[input.selectedIndex].textContent;
            editor.setOption("theme", theme);
            location.hash = "#" + theme;
          }
          var choice = (location.hash && location.hash.slice(1)) ||
                       (document.location.search &&
                        decodeURIComponent(document.location.search.slice(1)));
          if (choice) {
            input.value = choice;
            editor.setOption("theme", choice);
          }
          CodeMirror.on(window, "hashchange", function() {
            var theme = location.hash.slice(1);
            if (theme) { input.value = theme; selectTheme(); }
          });
        </script>

        <script src="codemirror/lib/background.js"></script>

    <!-- jQuery 2.1.4 -->
    <script src="AdminLTE/plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="AdminLTE/bootstrap/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="AdminLTE/plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="AdminLTE/dist/js/app.min.js"></script>
    <!-- Sparkline -->
    <script src="AdminLTE/plugins/sparkline/jquery.sparkline.min.js"></script>
    <!-- jvectormap -->
    <script src="AdminLTE/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="AdminLTE/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <!-- SlimScroll 1.3.0 -->
    <script src="AdminLTE/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- ChartJS 1.0.1 -->
    <script src="AdminLTE/plugins/chartjs/Chart.min.js"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="AdminLTE/dist/js/pages/dashboard2.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="AdminLTE/dist/js/demo.js"></script>

    <script>

      var getUrlParameter = function getUrlParameter(sParam) {
          var sPageURL = decodeURIComponent(window.location.search.substring(1)),
              sURLVariables = sPageURL.split('&'),
              sParameterName,
              i;

          for (i = 0; i < sURLVariables.length; i++) {
              sParameterName = sURLVariables[i].split('=');

              if (sParameterName[0] === sParam) {
                  return sParameterName[1] === undefined ? true : sParameterName[1];
              }
          }
      };

      var pusher = new Pusher('7cf17138b96636bf08be', {
        encrypted: true
      });

      var channelName = getUrlParameter('channel');
      document.title = 'codetogether | ' + channelName;

      var channel = pusher.subscribe(channelName);
      channel.bind('my_event', function(data) {
        document.getElementById('code') = data.message;
      });

      channel.bind('solution_provided', function(data) { 
        addDone(data.title, data.description);
      })
    </script>

    <script>
      function addPending() {
          var ul = document.getElementById("pending-challenges");
          var li = document.createElement("li");
          var a = document.createElement("a");
          var i = document.createElement("i");
          var title = document.getElementById('challengetitle').value;
          var description = document.getElementById('challengedescription').value;
          a.setAttribute("data-toggle", "modal");
          a.setAttribute("data-target", "#pendingModal");
          a.setAttribute("href", "#");
          i.setAttribute("class", "fa fa-circle-o");
          a.appendChild(i);
          a.appendChild(document.createTextNode(title));
          li.setAttribute("id", title);
          li.appendChild(a);
          ul.appendChild(li);

          document.getElementById("pendingTitle").value = title;
          document.getElementById("pendingDescription").value = description;

          var channel = getUrlParameter('channel');
              $.post('https://codetogethertech.herokuapp.com/addChallenge/' + channel + '&' + title + '&' + description, null, function(data) {
                console.log("works on every enter");
          });
        }

        function addDone(title, code) {
          var ul = document.getElementById("done-challenges");
          var li = document.createElement("li");
          var a = document.createElement("a");
          var i = document.createElement("i");
          a.setAttribute("href", "#");
          a.setAttribute("data-toggle", "modal");
          a.setAttribute("data-target", "#solutionModal");
          i.setAttribute("class", "fa fa-circle-o");
          a.appendChild(i);
          a.appendChild(document.createTextNode(title));
          li.appendChild(a);
          ul.appendChild(li);

          document.getElementById("solvedTitle").value = title;
          document.getElementById("solvedDescription").value = code;

          $("#pending-challenges").eq(1).remove();
        }
    </script>
  

<div class="jvectormap-label"></div>


</body></html>